CREATE DATABASE OFICINA;

USE OFICINA;




CREATE TABLE CARRO(
	IDCARRO INT,
	ID_MARCA INT,
	MODELO VARCHAR(30),
	PLACA VARCHAR(9),
	KM INT(6),
	TIPO ENUM('Carro','Van','Caminhão')
);

CREATE TABLE MARCA(
	IDMARCA INT,
	NOME VARCHAR (15)
);

CREATE TABLE DONO(
	IDDONO INT,
	ID_CARRO INT,
	NOME VARCHAR (50),
	HABILITACAO ENUM('A','B','C','D'),
	IDENTIDADE VARCHAR(15)
);

CREATE TABLE TELEFONE(
	IDTELEFONE INT,
	ID_DONO INT,
	TIPO ENUM('Res','Cel','Com'),
	NUMERO INT (11),
	DDD CHAR (2)
);

CREATE TABLE COR(
	IDCOR INT,
	COR VARCHAR (10)
);

CREATE TABLE CARRO_COR(
	ID_CARRO_COR INT,
	ID_CARRO INT,
	ID_COR INT
);






ALTER TABLE CARRO
	ADD CONSTRAINT PK_CARRO
	PRIMARY KEY (IDCARRO);

ALTER TABLE MARCA
	ADD CONSTRAINT PK_MARCA
	PRIMARY KEY (IDMARCA);

ALTER TABLE DONO 
	ADD CONSTRAINT PK_DONO
	PRIMARY KEY (IDDONO);

ALTER TABLE TELEFONE 
	ADD CONSTRAINT PK_TELEFONE
	PRIMARY KEY (IDTELEFONE);

ALTER TABLE COR
	ADD CONSTRAINT PK_COR
	PRIMARY KEY (IDCOR);

ALTER TABLE CARRO_COR
	ADD CONSTRAINT PK_CARRO_COR
	PRIMARY KEY (ID_CARRO, ID_COR);	





ALTER TABLE CARRO 
	ADD CONSTRAINT FK_MARCA_CARRO
	FOREIGN KEY (ID_MARCA) 
		REFERENCES MARCA (IDMARCA);

ALTER TABLE DONO 
	ADD CONSTRAINT FK_CARRO_DONO
	FOREIGN KEY (ID_CARRO) 
		REFERENCES CARRO (IDCARRO);

ALTER TABLE TELEFONE
	ADD CONSTRAINT FK_DONO_TELEFONE
	FOREIGN KEY (ID_DONO)
		REFERENCES DONO (IDDONO);

ALTER TABLE CARRO_COR
	ADD CONSTRAINT FK_CARRO_CARRO_COR
	FOREIGN KEY (ID_CARRO)
		REFERENCES CARRO (IDCARRO);

ALTER TABLE CARRO_COR
	ADD CONSTRAINT FK_COR_CARRO_COR
	FOREIGN KEY (ID_COR) 
		REFERENCES COR (IDCOR);



INSERT INTO MARCA VALUES (1, "Chevrolet");
INSERT INTO MARCA VALUES (2, "Honda");
INSERT INTO MARCA VALUES (3, "Volkswagen");
INSERT INTO MARCA VALUES (4, "Volvo");

INSERT INTO CARRO VALUES(1, 1, "Onix 1.0", "ABCD-1234",0,'Carro');
INSERT INTO CARRO VALUES(2, 1, "Onix 2.0", "ABCD-1235",100,'Carro');
INSERT INTO CARRO VALUES(3, 2, "Fusion Titannium", "ABCD-4321",10000,'Carro');
INSERT INTO CARRO VALUES(4, 2, "Civic 2018", "ABXD-2134",700,'Carro');
INSERT INTO CARRO VALUES(5, 3, "Golf 1.6", "ZWCD-4515",12000,'Carro');
INSERT INTO CARRO VALUES(6, 3, "Polo 2.0", "VSDC-5426",27653,'Carro');
INSERT INTO CARRO VALUES(7, 3, "Onix 1.0", "TEVS-3434",22354,'Carro');
INSERT INTO CARRO VALUES(8, 3, "Nivus", "ERTG-6546",56542,'Carro');
INSERT INTO CARRO VALUES(9, 3, "Up!", "JMHG-7363",0,'Carro');
INSERT INTO CARRO VALUES(10, 4, "Volvo FH 540", "SFDV-3453",0,'Caminhão');

INSERT INTO DONO VALUES(1, 1, "Renan Moreira", 'B',null);
INSERT INTO DONO VALUES(2, 2, "Ruan Moreira", 'B',null);
INSERT INTO DONO VALUES(3, 3, "Rayane Letícia", 'B',null);
INSERT INTO DONO VALUES(4, 4, "Karine Moreira", 'B',null);
INSERT INTO DONO VALUES(5, 5, "Angela Souza", 'B',null);
INSERT INTO DONO VALUES(6, 6, "Ronaldo Moreira", 'B',null);
INSERT INTO DONO VALUES(7, 7, "Tatiana Castro", 'B',null);
INSERT INTO DONO VALUES(8, 8, "Marlene Oliveira", 'B',null);
INSERT INTO DONO VALUES(9, 9, "Antônio Alves", 'B',null);
INSERT INTO DONO VALUES(10, 10, "Ana Carolina", 'D',null);



+------------+-------------------------+------+-----+---------+-------+
| Field      | Type                    | Null | Key | Default | Extra |
+------------+-------------------------+------+-----+---------+-------+
| IDTELEFONE | int(11)                 | NO   | PRI | NULL    |       |
| ID_DONO    | int(11)                 | YES  | MUL | NULL    |       |
| TIPO       | enum('Res','Cel','Com') | YES  |     | NULL    |       |
| NUMERO     | int(11)                 | YES  |     | NULL    |       |
| DDD        | char(2)                 | YES  |     | NULL    |       |
+------------+-------------------------+------+-----+---------+-------+

INSERT INTO TELEFONE VALUES ();


INSERT INTO COR VALUES(1, "Cinza");
INSERT INTO COR VALUES(2, "Preto");
INSERT INTO COR VALUES(3, "Branco");
INSERT INTO COR VALUES(4, "Vermelho");
INSERT INTO COR VALUES(5, "Prata");
INSERT INTO COR VALUES(6, "Azul");











DESC CARRO;
DESC COR;
DESC DONO;
DESC TELEFONE;
DESC MARCA;


